â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    16Gå†…å­˜SFTè®­ç»ƒ - å¿«é€Ÿå‚è€ƒå¡ç‰‡                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ æ¨èé…ç½®ï¼ˆ16Gå†…å­˜ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  è®­ç»ƒæ ·æœ¬ï¼š5,000
  éªŒè¯æ ·æœ¬ï¼š500
  å†…å­˜å ç”¨ï¼š8-10GBï¼ˆåŒGPUï¼‰
  è®­ç»ƒæ—¶é•¿ï¼š2-4å°æ—¶/epoch Ã— 3 epochs = 6-12å°æ—¶

ğŸš€ æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼ˆä¸€é”®å¯åŠ¨ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ./quick_start_sft_small.sh

  å°±è¿™ä¹ˆç®€å•ï¼è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
  âœ… æ•°æ®é‡‡æ ·ï¼ˆ5000æ ·æœ¬ï¼‰
  âœ… æ›´æ–°é…ç½®æ–‡ä»¶
  âœ… å¯åŠ¨è®­ç»ƒ

ğŸ“ æ‰‹åŠ¨æ‰§è¡Œï¼ˆ3æ­¥ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # 1. å‡†å¤‡æ•°æ®
  python prepare_small_sft_data.py \
      --input data/sft_train_dataset.parquet \
      --output data/sft_5k.parquet \
      --num_samples 5000

  # 2. ä¿®æ”¹config.pyä¸­çš„TrainConfigSFTSmall
  #    train_file = './data/sft_5k_train.parquet'
  #    validation_file = './data/sft_5k_valid.parquet'

  # 3. å¼€å§‹è®­ç»ƒ
  accelerate launch --multi_gpu --num_processes 2 \
      ./train_low_mem.py train --is_finetune=True

ğŸ”§ è‡ªå®šä¹‰é€‰é¡¹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # ä½¿ç”¨3000æ ·æœ¬ï¼ˆæ›´çœå†…å­˜ï¼‰
  ./quick_start_sft_small.sh --samples 3000

  # ä»JSONæ–‡ä»¶é‡‡æ ·
  ./quick_start_sft_small.sh \
      --input data/alpaca_gpt4_data_zh.json \
      --samples 5000

  # æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹
  ./quick_start_sft_small.sh --help

ğŸ“Š ä¸åŒæ ·æœ¬æ•°å¯¹æ¯”
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  æ ·æœ¬æ•°    å†…å­˜å ç”¨    è®­ç»ƒæ—¶é•¿      é€‚ç”¨åœºæ™¯
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  3,000     6-8GB      1-2h/epoch    å¿«é€ŸéªŒè¯
  5,000     8-10GB     2-4h/epoch    æ¨èï¼šå¹³è¡¡æ•ˆæœä¸é€Ÿåº¦ â­
  8,000     10-12GB    4-6h/epoch    è¿½æ±‚æ›´å¥½æ•ˆæœ
  10,000+   12GB+      6+h/epoch     éœ€è¦æ›´å¤šå†…å­˜

ğŸ’¡ æ•°æ®æºé€‰æ‹©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  æ¨èï¼šsft_train_dataset.parquet
  åŸå› ï¼šâœ… å·²é¢„å¤„ç†  âœ… æ ¼å¼ä¼˜åŒ–  âœ… å…¼å®¹æ€§å¥½

  å¤‡é€‰ï¼šalpaca_gpt4_data_zh.json
  åŸå› ï¼šâœ… é«˜è´¨é‡GPT-4æ•°æ®  âœ… é€‚åˆå¯¹è¯ä»»åŠ¡

ğŸ” ç›‘æ§è®­ç»ƒ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # ç›‘æ§å†…å­˜å’ŒGPUï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
  watch -n 2 'free -h && echo "---GPU---" && nvidia-smi'

  # æŸ¥çœ‹è®­ç»ƒæ—¥å¿—
  tail -f logs/*.log

âš ï¸  å†…å­˜ä¸å¤Ÿï¼Ÿè¯•è¯•è¿™äº›
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  1. å‡å°‘æ ·æœ¬æ•°ï¼š--samples 3000
  2. å‡å°‘åºåˆ—é•¿åº¦ï¼šconfig.pyä¸­ max_seq_len = 256
  3. ä½¿ç”¨å•GPUï¼špython train_low_mem.py train --is_finetune=True

ğŸ“š æ›´å¤šå¸®åŠ©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  è¯¦ç»†æŒ‡å—ï¼šcat SFT_SMALL_DATASET_GUIDE.md
  å®Œæ•´æ–¹æ¡ˆï¼šcat README_SFT_16G.md

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ç°åœ¨å°±å¼€å§‹ï¼š./quick_start_sft_small.sh                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
